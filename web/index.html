<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>valtio-fsm</title><meta name="description" content="Documentation for valtio-fsm"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">valtio-fsm</a><div id="tsd-toolbar-links"><a href="/modules.html">API</a><a href="https://github.com/valtiojs/valtio-fsm">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>valtio-fsm</h1></div><div class="tsd-panel tsd-typography"><p><img src="https://img.shields.io/npm/v/valtio-fsm?style=flat-square&amp;color=%2313c2c2" alt="NPM Version">
<img src="https://img.shields.io/github/actions/workflow/status/valtiojs/valtio-fsm/test.yml?style=flat-square&amp;color=%2313c2c2" alt="GitHub Actions Workflow Status">
<img src="https://img.shields.io/bundlephobia/minzip/valtio-fsm?style=flat-square&amp;color=%2313c2c2" alt="npm bundle size">
<img src="https://img.shields.io/npm/l/valtio-fsm?style=flat-square&amp;color=%2313c2c2" alt="NPM License"></p>
<h1 id="valtio-fsm" class="tsd-anchor-link">Valtio FSM<a href="#valtio-fsm" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p>Try out the <a href="https://valtio-fsm.vercel.app/">visual editor</a>
or check out the <a href="https://valtio-fsm-docs.vercel.app/">type docs</a></p>
</blockquote>
<p>A reactive finite state machine library built on top of <a href="https://github.com/pmndrs/valtio">Valtio</a> with inspiration from <a href="https://github.com/akhil0001/simple-state-machine/blob/HEAD/packages/core/README.md">Simple State Machine</a>.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>‚ö° Reactive state management powered by Valtio</li>
<li>üîí Type-safe with TypeScript generics</li>
<li>üîÑ Finite state machine pattern for predictable state transitions</li>
<li>üìú Context and transition history tracking</li>
<li>‚öõÔ∏è Seamless React integration</li>
<li>üîå Event system for cross-cutting concerns</li>
<li>üîß Chainable API for expressive code</li>
<li>üß™ Well-tested with extensive coverage</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">valtio-fsm</span><span class="hl-1"> </span><span class="hl-2">valtio</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">valtio-fsm</span><span class="hl-1"> </span><span class="hl-2">valtio</span><br/><span class="hl-3"># or </span><br/><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">valtio-fsm</span><span class="hl-1"> </span><span class="hl-2">valtio</span>
</code><button type="button">Copy</button></pre>

<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createMachine</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio-fsm&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">useSnapshot</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Define state and context types</span><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">LightState</span><span class="hl-1"> = </span><span class="hl-2">&#39;green&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;yellow&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">LightContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-5">duration</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">cycleCount</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">// Create a state machine</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">trafficLight</span><span class="hl-1"> = </span><span class="hl-0">createMachine</span><span class="hl-1">&lt;</span><span class="hl-7">LightState</span><span class="hl-1">, </span><span class="hl-7">LightContext</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;green&#39;</span><span class="hl-1">, </span><span class="hl-3">// Initial state</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">green:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;yellow&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onExit</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">duration</span><span class="hl-1"> = </span><span class="hl-9">5</span><span class="hl-1">; }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">yellow:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onEnter</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">cycleCount</span><span class="hl-1">++; }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">red:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;green&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-3">// Initial context</span><br/><span class="hl-1">  { </span><span class="hl-5">duration:</span><span class="hl-1"> </span><span class="hl-9">30</span><span class="hl-1">, </span><span class="hl-5">cycleCount:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-3">// Options</span><br/><span class="hl-1">  { </span><span class="hl-5">enableHistory:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Use in React components</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">TrafficLightComponent</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">snap</span><span class="hl-1"> = </span><span class="hl-0">useSnapshot</span><span class="hl-1">(</span><span class="hl-5">trafficLight</span><span class="hl-1">.</span><span class="hl-0">getStore</span><span class="hl-1">());</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    &lt;</span><span class="hl-7">div</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-5">div</span><span class="hl-1"> </span><span class="hl-5">className</span><span class="hl-1">={</span><span class="hl-2">`light </span><span class="hl-6">${</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">} /&gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-7">p</span><span class="hl-1">&gt;</span><span class="hl-5">State</span><span class="hl-1">: {</span><span class="hl-7">snap</span><span class="hl-1">.</span><span class="hl-5">state</span><span class="hl-1">}&lt;/</span><span class="hl-7">p</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-7">p</span><span class="hl-1">&gt;</span><span class="hl-5">Duration</span><span class="hl-1">: {</span><span class="hl-7">snap</span><span class="hl-1">.</span><span class="hl-7">context</span><span class="hl-1">.</span><span class="hl-5">duration</span><span class="hl-1">}&lt;/</span><span class="hl-7">p</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-7">p</span><span class="hl-1">&gt;</span><span class="hl-5">Cycle</span><span class="hl-1"> </span><span class="hl-5">count</span><span class="hl-1">: {</span><span class="hl-7">snap</span><span class="hl-1">.</span><span class="hl-7">context</span><span class="hl-1">.</span><span class="hl-5">cycleCount</span><span class="hl-1">}&lt;/</span><span class="hl-7">p</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-5">button</span><span class="hl-1"> </span><br/><span class="hl-1">        </span><span class="hl-5">onClick</span><span class="hl-1">={() =&gt; {</span><br/><span class="hl-1">          </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">trafficLight</span><span class="hl-1">.</span><span class="hl-0">canMoveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;yellow&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-5">trafficLight</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;yellow&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        }}</span><br/><span class="hl-1">      &gt;</span><br/><span class="hl-1">        </span><span class="hl-5">Next</span><br/><span class="hl-1">      &lt;/</span><span class="hl-5">button</span><span class="hl-1">&gt;</span><br/><span class="hl-1">    &lt;/</span><span class="hl-5">div</span><span class="hl-1">&gt;</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="core-concepts" class="tsd-anchor-link">Core Concepts<a href="#core-concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="state-machine" class="tsd-anchor-link">State Machine<a href="#state-machine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A finite state machine (FSM) is a mathematical model that has a finite number of states and transitions between those states. At any given time, the machine can be in only one state.</p>
<h3 id="states" class="tsd-anchor-link">States<a href="#states" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each state represents a condition of the system. In Valtio FSM, states are defined as string literals.</p>
<h3 id="transitions" class="tsd-anchor-link">Transitions<a href="#transitions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Transitions define how the machine can move from one state to another. Only explicitly defined transitions are allowed.</p>
<h3 id="context" class="tsd-anchor-link">Context<a href="#context" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Context stores data that persists across state transitions. It's a reactive Valtio proxy object that triggers updates when modified.</p>
<h3 id="handlers" class="tsd-anchor-link">Handlers<a href="#handlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Handlers are functions executed when entering or exiting a state:</p>
<ul>
<li><code>onEnter</code>: Runs when entering a state</li>
<li><code>onExit</code>: Runs when leaving a state</li>
</ul>
<p>Both handlers receive the current context and optional payload data.</p>
<h3 id="events" class="tsd-anchor-link">Events<a href="#events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Events provide a way to respond to external triggers without changing the state. Event handlers can modify the context.</p>
<h2 id="api-reference" class="tsd-anchor-link">API Reference<a href="#api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="createmachine" class="tsd-anchor-link"><code>createMachine</code><a href="#createmachine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">createMachine</span><span class="hl-1">&lt;</span><span class="hl-7">TState</span><span class="hl-1">, </span><span class="hl-7">TContext</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-5">initialState</span><span class="hl-1">: </span><span class="hl-5">TState</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">stateConfig</span><span class="hl-1">: </span><span class="hl-5">StateConfig</span><span class="hl-1">&lt;</span><span class="hl-5">TState</span><span class="hl-1">, </span><span class="hl-5">TContext</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">  </span><span class="hl-5">initialContext</span><span class="hl-1">?: </span><span class="hl-5">TContext</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">options</span><span class="hl-1">?: </span><span class="hl-5">MachineOptions</span><span class="hl-1">&lt;</span><span class="hl-5">TState</span><span class="hl-1">&gt;</span><br/><span class="hl-1">): </span><span class="hl-5">ChainableStateMachine</span><span class="hl-1">&lt;</span><span class="hl-5">TState</span><span class="hl-1">, </span><span class="hl-5">TContext</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Creates a new state machine instance.</p>
<h4 id="parameters" class="tsd-anchor-link">Parameters:<a href="#parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>initialState</code>: The starting state of the machine.</li>
<li><code>stateConfig</code>: Configuration object defining states, transitions, and handlers.</li>
<li><code>initialContext</code>: (Optional) Initial context data.</li>
<li><code>options</code>: (Optional) Machine configuration options.</li>
</ul>
<h4 id="return-value" class="tsd-anchor-link">Return value:<a href="#return-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>A chainable state machine instance.</p>
<h3 id="stateconfig" class="tsd-anchor-link">StateConfig<a href="#stateconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Configuration defining states, their allowed transitions, and handlers.</p>
<pre><code class="typescript"><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">StateConfig</span><span class="hl-1">&lt;</span><span class="hl-7">TState</span><span class="hl-1">, </span><span class="hl-7">TContext</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  [</span><span class="hl-7">key</span><span class="hl-1"> </span><span class="hl-6">in</span><span class="hl-1"> </span><span class="hl-7">TState</span><span class="hl-1">]?: {</span><br/><span class="hl-1">    </span><span class="hl-5">transitions</span><span class="hl-1">: </span><span class="hl-7">TState</span><span class="hl-1">[];</span><br/><span class="hl-1">    </span><span class="hl-0">onEnter</span><span class="hl-1">?: (</span><span class="hl-5">context</span><span class="hl-1">: </span><span class="hl-7">TContext</span><span class="hl-1">, </span><span class="hl-5">payload</span><span class="hl-1">?: </span><span class="hl-7">unknown</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-7">void</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">onExit</span><span class="hl-1">?: (</span><span class="hl-5">context</span><span class="hl-1">: </span><span class="hl-7">TContext</span><span class="hl-1">, </span><span class="hl-5">payload</span><span class="hl-1">?: </span><span class="hl-7">unknown</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-7">void</span><span class="hl-1">;</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="machineoptions" class="tsd-anchor-link">MachineOptions<a href="#machineoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Options for customizing the state machine.</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-7">MachineOptions</span><span class="hl-1">&lt;</span><span class="hl-7">TState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-5">enableHistory</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><span class="hl-1">;  </span><span class="hl-3">// Whether to track transition history</span><br/><span class="hl-1">  </span><span class="hl-5">historySize</span><span class="hl-1">?: </span><span class="hl-7">number</span><span class="hl-1">;     </span><span class="hl-3">// Maximum size of history (default: 100)</span><br/><span class="hl-1">  </span><span class="hl-5">onTransition</span><span class="hl-1">?: </span><span class="hl-7">TransitionListener</span><span class="hl-1">&lt;</span><span class="hl-7">TState</span><span class="hl-1">&gt;; </span><span class="hl-3">// Global transition listener</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="chainablestatemachine-methods" class="tsd-anchor-link">ChainableStateMachine Methods<a href="#chainablestatemachine-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The state machine instance returned by <code>createMachine</code> provides these methods:</p>
<h4 id="state-management" class="tsd-anchor-link">State Management<a href="#state-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>moveTo(state, payload?)</code>: Transitions to a new state with optional payload</li>
<li><code>isIn(state)</code>: Checks if the machine is in a specific state</li>
<li><code>canMoveTo(state)</code>: Checks if a transition to the given state is valid</li>
<li><code>resetContext()</code>: Resets context to initial values</li>
</ul>
<h4 id="getters" class="tsd-anchor-link">Getters<a href="#getters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>current</code>: Current state value (readonly)</li>
<li><code>context</code>: Current context object (readonly)</li>
<li><code>getStore()</code>: Returns the Valtio store for use with <code>useSnapshot</code></li>
</ul>
<h4 id="listeners" class="tsd-anchor-link">Listeners<a href="#listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>onTransition(listener)</code>: Registers a transition listener</li>
<li><code>whenIn(state, callback)</code>: Registers a callback for a specific state</li>
<li><code>onContextChange(listener)</code>: Registers a context change listener</li>
</ul>
<h4 id="history" class="tsd-anchor-link">History<a href="#history" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>getHistory()</code>: Returns the transition history</li>
<li><code>clearHistory()</code>: Clears the transition history</li>
<li><code>enableHistory(enable?)</code>: Enables or disables history tracking</li>
<li><code>setHistorySize(size)</code>: Sets the maximum history size</li>
</ul>
<h4 id="dynamic-configuration" class="tsd-anchor-link">Dynamic Configuration<a href="#dynamic-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>setTransitions(state, transitions)</code>: Sets allowed transitions for a state</li>
<li><code>addTransition(state, transition)</code>: Adds a single transition to a state</li>
<li><code>removeTransition(state, transition)</code>: Removes a transition from a state</li>
<li><code>setHandler(state, type, handler)</code>: Sets an onEnter or onExit handler</li>
</ul>
<h4 id="event-system" class="tsd-anchor-link">Event System<a href="#event-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><code>on(eventName, handler)</code>: Registers an event handler</li>
<li><code>once(eventName, handler)</code>: Registers a one-time event handler</li>
<li><code>off(eventName, handler?)</code>: Removes an event handler</li>
<li><code>fire(eventName, payload?)</code>: Fires an event</li>
</ul>
<h2 id="advanced-examples" class="tsd-anchor-link">Advanced Examples<a href="#advanced-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="context-management-and-reactivity" class="tsd-anchor-link">Context Management and Reactivity<a href="#context-management-and-reactivity" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createMachine</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio-fsm&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">snapshot</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Define a more complex context</span><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">UserContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-5">isAuthenticated</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">profile</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-5">name</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">email</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">preferences</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-5">theme</span><span class="hl-1">: </span><span class="hl-2">&#39;light&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;dark&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">notifications</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">  </span><span class="hl-5">lastLogin</span><span class="hl-1">: </span><span class="hl-7">Date</span><span class="hl-1"> | </span><span class="hl-7">null</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">authMachine</span><span class="hl-1"> = </span><span class="hl-0">createMachine</span><span class="hl-1">&lt;</span><span class="hl-2">&#39;guest&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;authenticated&#39;</span><span class="hl-1">, </span><span class="hl-7">UserContext</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;guest&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">guest:</span><span class="hl-1"> { </span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;authenticated&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onExit</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">, </span><span class="hl-5">userData</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">// Update context when transitioning from guest to authenticated</span><br/><span class="hl-1">        </span><span class="hl-5">Object</span><span class="hl-1">.</span><span class="hl-0">assign</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">profile</span><span class="hl-1">, </span><span class="hl-5">userData</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">isAuthenticated</span><span class="hl-1"> = </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">lastLogin</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">();</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">authenticated:</span><span class="hl-1"> { </span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;guest&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onExit</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">// Clear sensitive data when logging out</span><br/><span class="hl-1">        </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">isAuthenticated</span><span class="hl-1"> = </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">isAuthenticated:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">profile:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">preferences:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">theme:</span><span class="hl-1"> </span><span class="hl-2">&#39;light&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">notifications:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">lastLogin:</span><span class="hl-1"> </span><span class="hl-6">null</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Track context changes</span><br/><span class="hl-5">authMachine</span><span class="hl-1">.</span><span class="hl-0">onContextChange</span><span class="hl-1">((</span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">changes</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Context updated:&#39;</span><span class="hl-1">, </span><span class="hl-5">changes</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">// You could persist changes to localStorage here</span><br/><span class="hl-1">  </span><span class="hl-5">localStorage</span><span class="hl-1">.</span><span class="hl-0">setItem</span><span class="hl-1">(</span><span class="hl-2">&#39;userPreferences&#39;</span><span class="hl-1">, </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">profile</span><span class="hl-1">.</span><span class="hl-5">preferences</span><span class="hl-1">));</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Login</span><br/><span class="hl-5">authMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;authenticated&#39;</span><span class="hl-1">, { </span><br/><span class="hl-1">  </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;John Doe&#39;</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-5">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;john@example.com&#39;</span><span class="hl-1"> </span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Update preferences - this will trigger the context change listener</span><br/><span class="hl-5">authMachine</span><span class="hl-1">.</span><span class="hl-0">getStore</span><span class="hl-1">().</span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">profile</span><span class="hl-1">.</span><span class="hl-5">preferences</span><span class="hl-1">.</span><span class="hl-5">theme</span><span class="hl-1"> = </span><span class="hl-2">&#39;dark&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Get an immutable snapshot for comparison or debugging</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">currentSnapshot</span><span class="hl-1"> = </span><span class="hl-0">snapshot</span><span class="hl-1">(</span><span class="hl-5">authMachine</span><span class="hl-1">.</span><span class="hl-0">getStore</span><span class="hl-1">());</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">currentSnapshot</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Reset to initial state and context</span><br/><span class="hl-5">authMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;guest&#39;</span><span class="hl-1">).</span><span class="hl-0">resetContext</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="event-system-1" class="tsd-anchor-link">Event System<a href="#event-system-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createMachine</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio-fsm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">TodoState</span><span class="hl-1"> = </span><span class="hl-2">&#39;idle&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;loading&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">TodoContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-5">items</span><span class="hl-1">: { </span><span class="hl-5">id</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">; </span><span class="hl-5">text</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">; </span><span class="hl-5">completed</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1"> }[];</span><br/><span class="hl-1">  </span><span class="hl-5">error</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">filter</span><span class="hl-1">: </span><span class="hl-2">&#39;all&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;completed&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">todoMachine</span><span class="hl-1"> = </span><span class="hl-0">createMachine</span><span class="hl-1">&lt;</span><span class="hl-7">TodoState</span><span class="hl-1">, </span><span class="hl-7">TodoContext</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;idle&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">idle:</span><span class="hl-1"> { </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;loading&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">] },</span><br/><span class="hl-1">    </span><span class="hl-5">loading:</span><span class="hl-1"> { </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;idle&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">] },</span><br/><span class="hl-1">    </span><span class="hl-5">error:</span><span class="hl-1"> { </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;idle&#39;</span><span class="hl-1">] }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">items:</span><span class="hl-1"> [],</span><br/><span class="hl-1">    </span><span class="hl-5">error:</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">filter:</span><span class="hl-1"> </span><span class="hl-2">&#39;all&#39;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Register event handlers</span><br/><span class="hl-5">todoMachine</span><br/><span class="hl-1">  .</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;add&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">, </span><span class="hl-5">text</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-5">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">(),</span><br/><span class="hl-1">      </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-0">String</span><span class="hl-1">(</span><span class="hl-5">text</span><span class="hl-1">),</span><br/><span class="hl-1">      </span><span class="hl-5">completed:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;toggle&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">item</span><span class="hl-1"> = </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">item</span><span class="hl-1">.</span><span class="hl-5">id</span><span class="hl-1"> === </span><span class="hl-5">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">item</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-5">item</span><span class="hl-1">.</span><span class="hl-5">completed</span><span class="hl-1"> = !</span><span class="hl-5">item</span><span class="hl-1">.</span><span class="hl-5">completed</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;remove&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1"> = </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">item</span><span class="hl-1">.</span><span class="hl-5">id</span><span class="hl-1"> !== </span><span class="hl-5">id</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;setFilter&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">, </span><span class="hl-5">filter</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1"> = </span><span class="hl-5">filter</span><span class="hl-1">;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;clearCompleted&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1"> = </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> !</span><span class="hl-5">item</span><span class="hl-1">.</span><span class="hl-5">completed</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-3">// Register one-time event handler</span><br/><span class="hl-5">todoMachine</span><span class="hl-1">.</span><span class="hl-0">once</span><span class="hl-1">(</span><span class="hl-2">&#39;initialize&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">, </span><span class="hl-5">initialItems</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1"> = </span><span class="hl-5">initialItems</span><span class="hl-1"> || [];</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Fire events</span><br/><span class="hl-5">todoMachine</span><span class="hl-1">.</span><span class="hl-0">fire</span><span class="hl-1">(</span><span class="hl-2">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Learn Valtio FSM&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">todoMachine</span><span class="hl-1">.</span><span class="hl-0">fire</span><span class="hl-1">(</span><span class="hl-2">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Build an awesome app&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">todoMachine</span><span class="hl-1">.</span><span class="hl-0">fire</span><span class="hl-1">(</span><span class="hl-2">&#39;toggle&#39;</span><span class="hl-1">, </span><span class="hl-5">todoMachine</span><span class="hl-1">.</span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1">[</span><span class="hl-9">0</span><span class="hl-1">].</span><span class="hl-5">id</span><span class="hl-1">);</span><br/><span class="hl-5">todoMachine</span><span class="hl-1">.</span><span class="hl-0">fire</span><span class="hl-1">(</span><span class="hl-2">&#39;setFilter&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="dynamic-machine-configuration" class="tsd-anchor-link">Dynamic Machine Configuration<a href="#dynamic-machine-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createMachine</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio-fsm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">EditorState</span><span class="hl-1"> = </span><span class="hl-2">&#39;view&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;preview&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;locked&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">EditorContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-5">content</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">permissions</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-5">canEdit</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">canDelete</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">  </span><span class="hl-5">lastModified</span><span class="hl-1">: </span><span class="hl-7">Date</span><span class="hl-1"> | </span><span class="hl-7">null</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">// Create with minimal config, build it dynamically</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">editorMachine</span><span class="hl-1"> = </span><span class="hl-0">createMachine</span><span class="hl-1">&lt;</span><span class="hl-7">EditorState</span><span class="hl-1">, </span><span class="hl-7">EditorContext</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">view:</span><span class="hl-1"> { </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">] }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">permissions:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">canEdit:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">canDelete:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">lastModified:</span><span class="hl-1"> </span><span class="hl-6">null</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Dynamically add states, transitions and handlers</span><br/><span class="hl-5">editorMachine</span><br/><span class="hl-1">  .</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;locked&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;preview&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;preview&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;preview&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;locked&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  .</span><span class="hl-0">setHandler</span><span class="hl-1">(</span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;onEnter&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Save original content for undo</span><br/><span class="hl-1">    </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">_originalContent</span><span class="hl-1"> = </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  .</span><span class="hl-0">setHandler</span><span class="hl-1">(</span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;onExit&#39;</span><span class="hl-1">, (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Update last modified timestamp</span><br/><span class="hl-1">    </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">lastModified</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">();</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-3">// Update transitions based on permissions</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">updatePermissions</span><span class="hl-1">(</span><span class="hl-5">canEdit</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">, </span><span class="hl-5">canDelete</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">editorMachine</span><span class="hl-1">.</span><span class="hl-0">getStore</span><span class="hl-1">().</span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">permissions</span><span class="hl-1"> = { </span><span class="hl-5">canEdit</span><span class="hl-1">, </span><span class="hl-5">canDelete</span><span class="hl-1"> };</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">// If user can&#39;t edit, remove edit transition</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (!</span><span class="hl-5">canEdit</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">editorMachine</span><span class="hl-1">.</span><span class="hl-0">removeTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-4">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">editorMachine</span><span class="hl-1">.</span><span class="hl-0">addTransition</span><span class="hl-1">(</span><span class="hl-2">&#39;view&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="integration-with-react" class="tsd-anchor-link">Integration with React<a href="#integration-with-react" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="tsx"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createMachine</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio-fsm&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">useSnapshot</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;valtio&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">useState</span><span class="hl-1">, </span><span class="hl-5">useEffect</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;react&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">WizardState</span><span class="hl-1"> = </span><span class="hl-2">&#39;step1&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;step3&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-7">WizardContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-5">formData</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-5">name</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">email</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">plan</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">agreeToTerms</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">  </span><span class="hl-5">validationErrors</span><span class="hl-1">: </span><span class="hl-7">Record</span><span class="hl-1">&lt;</span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-7">string</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">wizardMachine</span><span class="hl-1"> = </span><span class="hl-0">createMachine</span><span class="hl-1">&lt;</span><span class="hl-7">WizardState</span><span class="hl-1">, </span><span class="hl-7">WizardContext</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;step1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">step1:</span><span class="hl-1"> { </span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onExit</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-0">validateStep1</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">)</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">step2:</span><span class="hl-1"> { </span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;step1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;step3&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onExit</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-0">validateStep2</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">)</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">step3:</span><span class="hl-1"> { </span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-0">onExit</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-0">validateStep3</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">)</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">complete:</span><span class="hl-1"> { </span><br/><span class="hl-1">      </span><span class="hl-5">transitions:</span><span class="hl-1"> [] </span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">formData:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">plan:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">agreeToTerms:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">validationErrors:</span><span class="hl-1"> {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Validation functions</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">validateStep1</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">errors</span><span class="hl-1"> = {};</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (!</span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-5">name</span><span class="hl-1">) </span><span class="hl-5">errors</span><span class="hl-1">.</span><span class="hl-5">name</span><span class="hl-1"> = </span><span class="hl-2">&#39;Name is required&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (!</span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-5">email</span><span class="hl-1">) </span><span class="hl-5">errors</span><span class="hl-1">.</span><span class="hl-5">email</span><span class="hl-1"> = </span><span class="hl-2">&#39;Email is required&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">validationErrors</span><span class="hl-1"> = </span><span class="hl-5">errors</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">Object</span><span class="hl-1">.</span><span class="hl-0">keys</span><span class="hl-1">(</span><span class="hl-5">errors</span><span class="hl-1">).</span><span class="hl-5">length</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">validateStep2</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">errors</span><span class="hl-1"> = {};</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (!</span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-5">plan</span><span class="hl-1">) </span><span class="hl-5">errors</span><span class="hl-1">.</span><span class="hl-5">plan</span><span class="hl-1"> = </span><span class="hl-2">&#39;Please select a plan&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">validationErrors</span><span class="hl-1"> = </span><span class="hl-5">errors</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">Object</span><span class="hl-1">.</span><span class="hl-0">keys</span><span class="hl-1">(</span><span class="hl-5">errors</span><span class="hl-1">).</span><span class="hl-5">length</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">validateStep3</span><span class="hl-1">(</span><span class="hl-5">ctx</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">errors</span><span class="hl-1"> = {};</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (!</span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-5">agreeToTerms</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">errors</span><span class="hl-1">.</span><span class="hl-5">agreeToTerms</span><span class="hl-1"> = </span><span class="hl-2">&#39;You must agree to terms&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">ctx</span><span class="hl-1">.</span><span class="hl-5">validationErrors</span><span class="hl-1"> = </span><span class="hl-5">errors</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">Object</span><span class="hl-1">.</span><span class="hl-0">keys</span><span class="hl-1">(</span><span class="hl-5">errors</span><span class="hl-1">).</span><span class="hl-5">length</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// React wizard component</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">Wizard</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">snap</span><span class="hl-1"> = </span><span class="hl-0">useSnapshot</span><span class="hl-1">(</span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">getStore</span><span class="hl-1">());</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">handleNext</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">currentState</span><span class="hl-1"> = </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-5">current</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">currentState</span><span class="hl-1"> === </span><span class="hl-2">&#39;step1&#39;</span><span class="hl-1">) </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">currentState</span><span class="hl-1"> === </span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1">) </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;step3&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">currentState</span><span class="hl-1"> === </span><span class="hl-2">&#39;step3&#39;</span><span class="hl-1">) </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;complete&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">handleBack</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">currentState</span><span class="hl-1"> = </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-5">current</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">currentState</span><span class="hl-1"> === </span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1">) </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;step1&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">currentState</span><span class="hl-1"> === </span><span class="hl-2">&#39;step3&#39;</span><span class="hl-1">) </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">moveTo</span><span class="hl-1">(</span><span class="hl-2">&#39;step2&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">updateFormData</span><span class="hl-1">(</span><span class="hl-5">field</span><span class="hl-1">, </span><span class="hl-5">value</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">wizardMachine</span><span class="hl-1">.</span><span class="hl-0">getStore</span><span class="hl-1">().</span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">formData</span><span class="hl-1">[</span><span class="hl-5">field</span><span class="hl-1">] = </span><span class="hl-5">value</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-1"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;wizard&quot;</span><span class="hl-11">&gt;</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-1"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;wizard-progress&quot;</span><span class="hl-11">&gt;</span><br/><span class="hl-1">        </span><span class="hl-6">{</span><span class="hl-10">[</span><span class="hl-2">&#39;step1&#39;</span><span class="hl-10">, </span><span class="hl-2">&#39;step2&#39;</span><span class="hl-10">, </span><span class="hl-2">&#39;step3&#39;</span><span class="hl-10">, </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-10">].</span><span class="hl-0">map</span><span class="hl-10">(</span><span class="hl-5">step</span><span class="hl-10"> </span><span class="hl-6">=&gt;</span><span class="hl-10"> (</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-10"> </span><br/><span class="hl-10">            </span><span class="hl-13">key</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-5">step</span><span class="hl-6">}</span><span class="hl-10"> </span><br/><span class="hl-10">            </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-2">`wizard-step </span><span class="hl-6">${</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">===</span><span class="hl-10"> </span><span class="hl-5">step</span><span class="hl-10"> </span><span class="hl-1">?</span><span class="hl-10"> </span><span class="hl-2">&#39;active&#39;</span><span class="hl-10"> </span><span class="hl-1">:</span><span class="hl-10"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-6">}</span><br/><span class="hl-10">          </span><span class="hl-11">/&gt;</span><br/><span class="hl-10">        ))</span><span class="hl-6">}</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;/</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">===</span><span class="hl-10"> </span><span class="hl-2">&#39;step1&#39;</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> (</span><br/><span class="hl-10">        </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-10"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;wizard-page&quot;</span><span class="hl-11">&gt;</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">h2</span><span class="hl-11">&gt;</span><span class="hl-10">Personal Information</span><span class="hl-11">&lt;/</span><span class="hl-12">h2</span><span class="hl-11">&gt;</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">input</span><br/><span class="hl-10">            </span><span class="hl-13">type</span><span class="hl-1">=</span><span class="hl-2">&quot;text&quot;</span><br/><span class="hl-10">            </span><span class="hl-13">placeholder</span><span class="hl-1">=</span><span class="hl-2">&quot;Name&quot;</span><br/><span class="hl-10">            </span><span class="hl-13">value</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">context</span><span class="hl-10">.</span><span class="hl-5">formData</span><span class="hl-10">.</span><span class="hl-5">name</span><span class="hl-6">}</span><br/><span class="hl-10">            </span><span class="hl-13">onChange</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-10">(</span><span class="hl-5">e</span><span class="hl-10">) </span><span class="hl-6">=&gt;</span><span class="hl-10"> </span><span class="hl-0">updateFormData</span><span class="hl-10">(</span><span class="hl-2">&#39;name&#39;</span><span class="hl-10">, </span><span class="hl-5">e</span><span class="hl-10">.</span><span class="hl-5">target</span><span class="hl-10">.</span><span class="hl-5">value</span><span class="hl-10">)</span><span class="hl-6">}</span><br/><span class="hl-10">          </span><span class="hl-11">/&gt;</span><br/><span class="hl-10">          </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">context</span><span class="hl-10">.</span><span class="hl-5">validationErrors</span><span class="hl-10">.</span><span class="hl-5">name</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> (</span><br/><span class="hl-10">            </span><span class="hl-11">&lt;</span><span class="hl-12">p</span><span class="hl-10"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;error&quot;</span><span class="hl-11">&gt;</span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">context</span><span class="hl-10">.</span><span class="hl-5">validationErrors</span><span class="hl-10">.</span><span class="hl-5">name</span><span class="hl-6">}</span><span class="hl-11">&lt;/</span><span class="hl-12">p</span><span class="hl-11">&gt;</span><br/><span class="hl-10">          )</span><span class="hl-6">}</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">input</span><br/><span class="hl-10">            </span><span class="hl-13">type</span><span class="hl-1">=</span><span class="hl-2">&quot;email&quot;</span><br/><span class="hl-10">            </span><span class="hl-13">placeholder</span><span class="hl-1">=</span><span class="hl-2">&quot;Email&quot;</span><br/><span class="hl-10">            </span><span class="hl-13">value</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">context</span><span class="hl-10">.</span><span class="hl-5">formData</span><span class="hl-10">.</span><span class="hl-5">email</span><span class="hl-6">}</span><br/><span class="hl-10">            </span><span class="hl-13">onChange</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-10">(</span><span class="hl-5">e</span><span class="hl-10">) </span><span class="hl-6">=&gt;</span><span class="hl-10"> </span><span class="hl-0">updateFormData</span><span class="hl-10">(</span><span class="hl-2">&#39;email&#39;</span><span class="hl-10">, </span><span class="hl-5">e</span><span class="hl-10">.</span><span class="hl-5">target</span><span class="hl-10">.</span><span class="hl-5">value</span><span class="hl-10">)</span><span class="hl-6">}</span><br/><span class="hl-10">          </span><span class="hl-11">/&gt;</span><br/><span class="hl-10">          </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">context</span><span class="hl-10">.</span><span class="hl-5">validationErrors</span><span class="hl-10">.</span><span class="hl-5">email</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> (</span><br/><span class="hl-10">            </span><span class="hl-11">&lt;</span><span class="hl-12">p</span><span class="hl-10"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;error&quot;</span><span class="hl-11">&gt;</span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">context</span><span class="hl-10">.</span><span class="hl-5">validationErrors</span><span class="hl-10">.</span><span class="hl-5">email</span><span class="hl-6">}</span><span class="hl-11">&lt;/</span><span class="hl-12">p</span><span class="hl-11">&gt;</span><br/><span class="hl-10">          )</span><span class="hl-6">}</span><br/><span class="hl-10">        </span><span class="hl-11">&lt;/</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-10">      )</span><span class="hl-6">}</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-6">{</span><span class="hl-3">/* Step 2 and 3 components here */</span><span class="hl-6">}</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">===</span><span class="hl-10"> </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> (</span><br/><span class="hl-10">        </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-10"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;wizard-complete&quot;</span><span class="hl-11">&gt;</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">h2</span><span class="hl-11">&gt;</span><span class="hl-10">Thank you!</span><span class="hl-11">&lt;/</span><span class="hl-12">h2</span><span class="hl-11">&gt;</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">p</span><span class="hl-11">&gt;</span><span class="hl-10">Your registration is complete.</span><span class="hl-11">&lt;/</span><span class="hl-12">p</span><span class="hl-11">&gt;</span><br/><span class="hl-10">        </span><span class="hl-11">&lt;/</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-10">      )</span><span class="hl-6">}</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-1"> </span><span class="hl-13">className</span><span class="hl-1">=</span><span class="hl-2">&quot;wizard-controls&quot;</span><span class="hl-11">&gt;</span><br/><span class="hl-1">        </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">!==</span><span class="hl-10"> </span><span class="hl-2">&#39;step1&#39;</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> </span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">!==</span><span class="hl-10"> </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> (</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">button</span><span class="hl-10"> </span><span class="hl-13">onClick</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-5">handleBack</span><span class="hl-6">}</span><span class="hl-11">&gt;</span><span class="hl-10">Back</span><span class="hl-11">&lt;/</span><span class="hl-12">button</span><span class="hl-11">&gt;</span><br/><span class="hl-10">        )</span><span class="hl-6">}</span><br/><span class="hl-1">        </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">!==</span><span class="hl-10"> </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-10"> </span><span class="hl-1">&amp;&amp;</span><span class="hl-10"> (</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;</span><span class="hl-12">button</span><span class="hl-10"> </span><span class="hl-13">onClick</span><span class="hl-1">=</span><span class="hl-6">{</span><span class="hl-5">handleNext</span><span class="hl-6">}</span><span class="hl-11">&gt;</span><br/><span class="hl-10">            </span><span class="hl-6">{</span><span class="hl-5">snap</span><span class="hl-10">.</span><span class="hl-5">state</span><span class="hl-10"> </span><span class="hl-1">===</span><span class="hl-10"> </span><span class="hl-2">&#39;step3&#39;</span><span class="hl-10"> </span><span class="hl-1">?</span><span class="hl-10"> </span><span class="hl-2">&#39;Complete&#39;</span><span class="hl-10"> </span><span class="hl-1">:</span><span class="hl-10"> </span><span class="hl-2">&#39;Next&#39;</span><span class="hl-6">}</span><br/><span class="hl-10">          </span><span class="hl-11">&lt;/</span><span class="hl-12">button</span><span class="hl-11">&gt;</span><br/><span class="hl-10">        )</span><span class="hl-6">}</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;/</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-1">    </span><span class="hl-11">&lt;/</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="best-practices" class="tsd-anchor-link">Best Practices<a href="#best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="state-design" class="tsd-anchor-link">State Design<a href="#state-design" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Keep States Minimal</strong>: Create states only for distinct UI/app conditions.</li>
<li><strong>Use Explicit Transitions</strong>: Always define allowed transitions for better predictability.</li>
<li><strong>Avoid Too Many States</strong>: Use context for variations within a state.</li>
</ol>
<h3 id="context-management" class="tsd-anchor-link">Context Management<a href="#context-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Keep Context Serializable</strong>: Avoid functions or complex objects in context when possible.</li>
<li><strong>Normalize Context Data</strong>: Structure context data for easy access and updates.</li>
<li><strong>Use Event Handlers</strong>: For complex context updates, use events rather than direct mutations.</li>
</ol>
<h3 id="handlers-1" class="tsd-anchor-link">Handlers<a href="#handlers-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Keep Handlers Pure</strong>: Avoid side effects in handlers when possible.</li>
<li><strong>Error Handling</strong>: Wrap handler code in try/catch for resilience.</li>
<li><strong>Validation in Exit Handlers</strong>: Use onExit handlers to validate before transitions.</li>
</ol>
<h3 id="react-integration" class="tsd-anchor-link">React Integration<a href="#react-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Use Snapshots</strong>: Always use <code>useSnapshot(machine.getStore())</code> in React components.</li>
<li><strong>Subscribe Selectively</strong>: When possible, subscribe to specific parts of the store for better performance.</li>
<li><strong>Reset on Unmount</strong>: Consider resetting context when components unmount.</li>
</ol>
<h3 id="performance" class="tsd-anchor-link">Performance<a href="#performance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Limit History Size</strong>: Set appropriate history size for your application needs.</li>
<li><strong>Clean Up Listeners</strong>: Remove listeners when no longer needed.</li>
<li><strong>Batch Context Updates</strong>: Group related context changes to reduce re-renders.</li>
</ol>
<h2 id="debugging" class="tsd-anchor-link">Debugging<a href="#debugging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="transition-history" class="tsd-anchor-link">Transition History<a href="#transition-history" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use the history features to debug state transition issues:</p>
<pre><code class="typescript"><span class="hl-3">// Enable history if not already enabled</span><br/><span class="hl-5">machine</span><span class="hl-1">.</span><span class="hl-0">enableHistory</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Get all transitions</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">history</span><span class="hl-1"> = </span><span class="hl-5">machine</span><span class="hl-1">.</span><span class="hl-0">getHistory</span><span class="hl-1">();</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Transition history:&#39;</span><span class="hl-1">, </span><span class="hl-5">history</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Listen to transitions</span><br/><span class="hl-5">machine</span><span class="hl-1">.</span><span class="hl-0">onTransition</span><span class="hl-1">((</span><span class="hl-5">from</span><span class="hl-1">, </span><span class="hl-5">to</span><span class="hl-1">, </span><span class="hl-5">payload</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Transition: </span><span class="hl-6">${</span><span class="hl-5">from</span><span class="hl-6">}</span><span class="hl-2"> ‚Üí </span><span class="hl-6">${</span><span class="hl-5">to</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-5">payload</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="context-changes" class="tsd-anchor-link">Context Changes<a href="#context-changes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Track context changes to debug data flow issues:</p>
<pre><code class="typescript"><span class="hl-5">machine</span><span class="hl-1">.</span><span class="hl-0">onContextChange</span><span class="hl-1">((</span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">changes</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Context changes:&#39;</span><span class="hl-1">, </span><span class="hl-5">changes</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#valtio-fsm"><span>Valtio FSM</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#core-concepts"><span>Core <wbr/>Concepts</span></a></li><li><ul><li><a href="#state-machine"><span>State <wbr/>Machine</span></a></li><li><a href="#states"><span>States</span></a></li><li><a href="#transitions"><span>Transitions</span></a></li><li><a href="#context"><span>Context</span></a></li><li><a href="#handlers"><span>Handlers</span></a></li><li><a href="#events"><span>Events</span></a></li></ul></li><li><a href="#api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#createmachine"><span>create<wbr/>Machine</span></a></li><li><ul><li><a href="#parameters"><span>Parameters:</span></a></li><li><a href="#return-value"><span>Return value:</span></a></li></ul></li><li><a href="#stateconfig"><span>State<wbr/>Config</span></a></li><li><a href="#machineoptions"><span>Machine<wbr/>Options</span></a></li><li><a href="#chainablestatemachine-methods"><span>Chainable<wbr/>State<wbr/>Machine <wbr/>Methods</span></a></li><li><ul><li><a href="#state-management"><span>State <wbr/>Management</span></a></li><li><a href="#getters"><span>Getters</span></a></li><li><a href="#listeners"><span>Listeners</span></a></li><li><a href="#history"><span>History</span></a></li><li><a href="#dynamic-configuration"><span>Dynamic <wbr/>Configuration</span></a></li><li><a href="#event-system"><span>Event <wbr/>System</span></a></li></ul></li></ul></li><li><a href="#advanced-examples"><span>Advanced <wbr/>Examples</span></a></li><li><ul><li><a href="#context-management-and-reactivity"><span>Context <wbr/>Management and <wbr/>Reactivity</span></a></li><li><a href="#event-system-1"><span>Event <wbr/>System</span></a></li><li><a href="#dynamic-machine-configuration"><span>Dynamic <wbr/>Machine <wbr/>Configuration</span></a></li><li><a href="#integration-with-react"><span>Integration with <wbr/>React</span></a></li></ul></li><li><a href="#best-practices"><span>Best <wbr/>Practices</span></a></li><li><ul><li><a href="#state-design"><span>State <wbr/>Design</span></a></li><li><a href="#context-management"><span>Context <wbr/>Management</span></a></li><li><a href="#handlers-1"><span>Handlers</span></a></li><li><a href="#react-integration"><span>React <wbr/>Integration</span></a></li><li><a href="#performance"><span>Performance</span></a></li></ul></li><li><a href="#debugging"><span>Debugging</span></a></li><li><ul><li><a href="#transition-history"><span>Transition <wbr/>History</span></a></li><li><a href="#context-changes"><span>Context <wbr/>Changes</span></a></li></ul></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="/interfaces/ChainableStateMachine.html">Core API</a><a href="/functions/createMachine.html">Function Reference</a><a href="/modules.html" class="tsd-nav-link">API</a><a href="https://github.com/valtiojs/valtio-fsm" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="modules.html">valtio-fsm</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
